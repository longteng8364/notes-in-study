<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        //订阅/发布模式(subscribe/publish):
            //订阅发布模式（又称观察者模式）定义了一种一对多的关系，让多个观察者同时监听某一个主题对象，这个对象的状态发生变化时，就会通知所有观察者对象
            //发布者发出通知 =》主题对象收到通知并推送给订阅者 =》订阅者执行相应操作

    //发布者publisher
    var pub = {
        publish: function (){
            dep.notify();
        }
    }

    //三个订阅者subscribers
    var sub1 = { update: function (){console.log(1)}};
    var sub2 = { update: function (){console.log(2)}};
    var sub3 = { update: function (){console.log(3)}};

    //一个主题对象
    function Dep (){
        this.subs = [sub1, sub2, sub3];
    }
    Dep.prototype.notify = function (){
        this.subs.forEach(function (sub){
            sub.update();
        })
    }

    //发布者发布消息，主题对象执行notify方法，进而触发订阅者执行update方法
    var dep = new Dep();
    pub.publish();
    </script>
</body>
</html>